% general imports %
\usepackage{xifthen}
\usepackage{tcolorbox}
\usepackage{theoremref}
\usepackage{enumitem}
\usepackage{bookmark}
\usepackage{comment}
\usepackage{xcolor}
\usepackage{transparent}
\usepackage{varwidth}
\usepackage{multicol}
\usepackage{import}
\usepackage{pdfpages}

% math imports
\usepackage{amsmath,amsfonts,amsthm,amssymb,mathtools}
\usepackage[varbb]{newpxmath}
\usepackage[makeroom]{cancel}
\usepackage{xfrac}
\usepackage{array}

% tikz imports
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{titletoc}
\usepackage{scalerel}
\usepackage{pict2e}
\usepackage{tkz-euclide}
\usepackage{tikzsymbols}
\usetikzlibrary{calc}
\usetikzlibrary{patterns,arrows.meta}
\usetikzlibrary{shadows}
\usetikzlibrary{external}

% cs imports
\usepackage[algoruled,linesnumbered,titlenumbered]{algorithm2e}

% pgfplots
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{statistics}
\usepgfplotslibrary{fillbetween}

\definecolor{clink}{HTML}{002137}
\usepackage{hyperref}
\hypersetup{%
  pdftitle = {Problems},
  colorlinks = true,
  linkcolor = clink,
  bookmarksnumbered = true,
  bookmarksopen = true
}

% language
\usepackage[polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% general settings
\setlength{\parindent}{1cm}%
\setlist[enumerate,1]{label=\textbf{(\alph*)}}

\addto\captionspolish{\renewcommand{\figurename}{Schemat}}
\addto\captionspolish{\renewcommand{\chaptername}{Lista}}
\addto\captionspolish{\renewcommand{\contentsname}{Spis zada≈Ñ.}}

% predefined sections
\tcbuselibrary{theorems, breakable, skins, hooks}

% ~~~
% problem box
% ~~~

% colors
\definecolor{problembg}{HTML}{f8f9fa}
\definecolor{problemframe}{HTML}{e9ecef}
\definecolor{problemdef}{HTML}{212529}

\newtcbtheorem[number within=section]{Problem}{Zadanie}
{%
  enhanced,
  breakable,
  oversize,
  colback = problembg,
  colframe = problemframe,
  coltitle = problemdef,
  sharp corners,
  detach title,
  before upper=\tcbtitle\quad,
  fonttitle = \bfseries\sffamily,
  description font = \mdseries,
  separator sign none,
}
{problem}

% command
\newcommand{\problem}[2]
{%
  \begin{Problem}{#1}{}
    #2
  \end{Problem}
}%

% ~~~
% formula box
% ~~~

% colors
\definecolor{formulabg}{HTML}{f6f2f0}
\definecolor{formulaframe}{HTML}{d0b49f}
\definecolor{formuladef}{HTML}{212529}

\newtcbtheorem[number within=section]{Formula}{}
{%
  enhanced,
  breakable,
  colback = formulabg,
  coltitle = formuladef,
  frame hidden,
  boxrule = 0sp,
  borderline west = {2pt}{0pt}{formulaframe},
  sharp corners,
  detach title,
  before upper = \tcbtitle\par\smallskip,
  fonttitle = \bfseries\sffamily,
  description font = \mdseries,
  separator sign none,
  segmentation style={solid, formulaframe},
}
{th}

\newcommand{\formula}[1]
{%
  \begin{Formula}{}{}
    #1
  \end{Formula}
}%

% contents

\definecolor{doc}{RGB}{0,60,110}
\contentsmargin{0cm}
\titlecontents{chapter}[3.7pc]
{\addvspace{30pt}%
	\begin{tikzpicture}[remember picture, overlay]%
		\draw[fill=doc!60,draw=doc!60] (-7,-.1) rectangle (-0.9,.5);%
		\pgftext[left,x=-3.5cm,y=0.2cm]{\color{white}\Large\sc\bfseries Sekcja\ \thecontentslabel};%
	\end{tikzpicture}\color{doc!60}\large\sc\bfseries}%
{}
{}
{\;\titlerule\;\large\sc\bfseries Strona \thecontentspage
	\begin{tikzpicture}[remember picture, overlay]
		\draw[fill=doc!60,draw=doc!60] (2pt,0) rectangle (4,0.1pt);
	\end{tikzpicture}}%
\titlecontents{section}[3.7pc]
{\addvspace{2pt}}
{\contentslabel[\thecontentslabel]{2pc}}
{}
{\hfill\small \thecontentspage}
[]
\titlecontents*{subsection}[3.7pc]
{\addvspace{-1pt}\small}
{}
{}
{\ --- \small\thecontentspage}
[ \textbullet\ ][]

\makeatletter
\renewcommand{\tableofcontents}{%
	\chapter*{%
	  \vspace*{-20\p@}%
	  \begin{tikzpicture}[remember picture, overlay]%
		  \pgftext[right,x=15cm,y=0.2cm]{\color{doc!60}\Huge\sc\bfseries \contentsname};%
		  \draw[fill=doc!60,draw=doc!60] (13,-.75) rectangle (20,1);%
		  \clip (13,-.75) rectangle (20,1);
		  \pgftext[right,x=15cm,y=0.2cm]{\color{white}\Huge\sc\bfseries \contentsname};%
	  \end{tikzpicture}}%
	\@starttoc{toc}}
\makeatother
